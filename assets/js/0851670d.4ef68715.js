"use strict";(self.webpackChunkkrateo_v_2_docs=self.webpackChunkkrateo_v_2_docs||[]).push([[5460],{7528:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>l});var t=s(7624),r=s(2172);const d={},i="Endpoint",c={id:"key-concepts/kcp/snowplow-endpoints",title:"Endpoint",description:"Overview",source:"@site/docs/20-key-concepts/20-kcp/22-snowplow-endpoints.md",sourceDirName:"20-key-concepts/20-kcp",slug:"/key-concepts/kcp/snowplow-endpoints",permalink:"/key-concepts/kcp/snowplow-endpoints",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:22,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"RESTAction",permalink:"/key-concepts/kcp/snowplow-RESTAction"},next:{title:"Understanding the Widget Custom Resource",permalink:"/key-concepts/kcp/snowplow-widgets"}},o={},l=[{value:"Overview",id:"overview",level:2},{value:"<code>Endpoint</code> keys",id:"endpoint-keys",level:2},{value:"Storage in Kubernetes",id:"storage-in-kubernetes",level:2},{value:"Behavior Summary",id:"behavior-summary",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.M)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"endpoint",children:(0,t.jsx)(n.code,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Endpoint"})," defines connection details and credentials for accessing an external API or service."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["It is stored as a Kubernetes ",(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/",children:(0,t.jsx)(n.code,{children:"Secret"})})," and consumed by ",(0,t.jsx)(n.a,{href:"/key-concepts/kcp/snowplow-RESTAction",children:(0,t.jsx)(n.code,{children:"RESTAction"})})," to establish secure HTTP or HTTPS connections."]}),"\n",(0,t.jsxs)(n.h2,{id:"endpoint-keys",children:[(0,t.jsx)(n.code,{children:"Endpoint"})," keys"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"server-url"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Base URL of the target API or service."}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"proxy-url"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Optional proxy address used for outbound HTTP traffic."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"token"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Bearer token for authentication."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"username"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Username for basic authentication."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"password"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Password for basic authentication."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"certificate-authority-data"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string (base64)"})}),(0,t.jsx)(n.td,{children:"Base64-encoded PEM CA certificate used to verify the remote server."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"client-certificate-data"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string (base64)"})}),(0,t.jsx)(n.td,{children:"Base64-encoded PEM client certificate for mutual TLS authentication."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"client-key-data"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string (base64)"})}),(0,t.jsx)(n.td,{children:"Base64-encoded PEM private key associated with the client certificate."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"debug"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"Enables verbose logging of HTTP requests/responses."}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"insecure"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsxs)(n.td,{children:["If ",(0,t.jsx)(n.code,{children:"true"}),", disables TLS certificate verification."]}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aws-access-key"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"AWS Access Key to generate the signature header for AWS APIs"}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aws-secret-key"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"AWS Secret Key to generate the signature header for AWS APIs"}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aws-region"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"AWS Region for the service API called"}),(0,t.jsx)(n.td,{children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aws-service"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"AWS Service name for the API called"}),(0,t.jsx)(n.td,{children:"\u274c"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"storage-in-kubernetes",children:"Storage in Kubernetes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Endpoint"})," information is stored as a ",(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/",children:(0,t.jsx)(n.code,{children:"Secret"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The secret\u2019s ",(0,t.jsx)(n.code,{children:".data"})," or ",(0,t.jsx)(n.code,{children:".stringData"})," must contain the fields above with the exact key names."]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Secret\nmetadata:\n  name: my-endpoint\n  namespace: default\nstringData:\n  server-url: https://api.example.com\n  proxy-url: http://proxy.internal:8080\n  token: "abc123"\n  username: "admin"\n  password: "s3cret"\n  certificate-authority-data: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCg=="\n  client-certificate-data: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCg=="\n  client-key-data: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQo="\n  debug: "true"\n  insecure: "false"\n  aws-access-key: AKIBZQ4DSBNZFAUKNDF7\n  aws-secret-key: 8CGb87PaNXmdUCdlwVbqwq5C9uNAFq6bcFx842uca\n  aws-region: eu-central-1\n  aws-service: s3\n'})}),"\n",(0,t.jsx)(n.p,{children:"\ud83d\udd0e Note: Certificate and key values must be base64-encoded strings."}),"\n",(0,t.jsx)(n.h2,{id:"behavior-summary",children:"Behavior Summary"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"server-url"})," is mandatory"]}),"\n",(0,t.jsx)(n.li,{children:"certificates and keys are expected to be base64-encoded, not raw PEM blocks"}),"\n",(0,t.jsx)(n.li,{children:"when insecure is true, the TLS client skips server certificate validation"}),"\n",(0,t.jsx)(n.li,{children:"if both clientCertificateData and clientKeyData are present, mutual TLS is enabled"}),"\n",(0,t.jsx)(n.li,{children:"if certificateAuthorityData is provided, it\u2019s added to the root CA pool"}),"\n",(0,t.jsx)(n.li,{children:"when a proxy URL is set, outbound requests are routed through it"}),"\n",(0,t.jsx)(n.li,{children:"boolean values (debug, insecure) are parsed from strings"}),"\n",(0,t.jsxs)(n.li,{children:["when all four ",(0,t.jsx)(n.code,{children:"aws-*"})," fields are specified, then AWS signature header calculation is enabled"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},2172:(e,n,s)=>{s.d(n,{I:()=>c,M:()=>i});var t=s(1504);const r={},d=t.createContext(r);function i(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);