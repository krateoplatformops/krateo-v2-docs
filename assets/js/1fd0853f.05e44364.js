"use strict";(self.webpackChunkkrateo_v_2_docs=self.webpackChunkkrateo_v_2_docs||[]).push([[472],{9944:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>l});var i=t(7624),s=t(2172);const a={},r="simple-page-guide",d={id:"how-to-guides/write-frontend/simple-page-guide",title:"simple-page-guide",description:"By following this guide you'll learn how to:",source:"@site/docs/30-how-to-guides/40-write-frontend/10-simple-page-guide.md",sourceDirName:"30-how-to-guides/40-write-frontend",slug:"/how-to-guides/write-frontend/simple-page-guide",permalink:"/how-to-guides/write-frontend/simple-page-guide",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Migrating from Crossplane Composition to Helm",permalink:"/how-to-guides/migrate-krateo/migrating-from-crossplane-composition-to-helm"},next:{title:"action-button-guide",permalink:"/how-to-guides/write-frontend/action-button-guide"}},o={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"A cluster running krateo v2.5.1+",id:"a-cluster-running-krateo-v251",level:3},{value:"Login",id:"login",level:4},{value:"The Krateo UI",id:"the-krateo-ui",level:4},{value:"Create a namespace for our widgets.",id:"create-a-namespace-for-our-widgets",level:3},{value:"Creating a Button widget.",id:"creating-a-button-widget",level:2},{value:"Showing the Button widget in a new Page",id:"showing-the-button-widget-in-a-new-page",level:2},{value:"Where is the Page?",id:"where-is-the-page",level:2},{value:"Creating a new link in the sidebar",id:"creating-a-new-link-in-the-sidebar",level:3},{value:"Visiting the new page",id:"visiting-the-new-page",level:3},{value:"Recap",id:"recap",level:2},{value:"Testing the declarative nature of widgets",id:"testing-the-declarative-nature-of-widgets",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"simple-page-guide",children:"simple-page-guide"}),"\n",(0,i.jsx)(n.p,{children:"By following this guide you'll learn how to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"create a Button widget"}),"\n",(0,i.jsx)(n.li,{children:"Create a page widget that show the Button"}),"\n",(0,i.jsx)(n.li,{children:"Create a link in the sidebar to navigate the page"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.h3,{id:"a-cluster-running-krateo-v251",children:"A cluster running krateo v2.5.1+"}),"\n",(0,i.jsxs)(n.p,{children:["For testing/demo purposed a new cluster can be crated using kind (",(0,i.jsx)(n.a,{href:"https://docs.krateo.io/quickstart",children:"more info"}),") by running:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"curl -L https://github.com/krateoplatformops/krateo-v2-docs/releases/latest/download/kind.sh | sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Launch this command to wait the Krateo platform to initialize"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"kubectl wait krateoplatformops krateo --for condition=Ready=True --namespace krateo-system --timeout=500s\n"})}),"\n",(0,i.jsx)(n.p,{children:"When ready it will print:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"krateoplatformops.krateo.io/krateo condition met\n"})}),"\n",(0,i.jsxs)(n.p,{children:["From now on you should be able to reach the Krateo's frontend at ",(0,i.jsx)(n.code,{children:"http://localhost:30080"})]}),"\n",(0,i.jsx)(n.h4,{id:"login",children:"Login"}),"\n",(0,i.jsxs)(n.p,{children:["The credential to login this test cluster are\nusername: ",(0,i.jsx)(n.code,{children:"admin"}),"\npassword: created during init, retrievable running ",(0,i.jsx)(n.code,{children:'kubectl get secret admin-password  -n krateo-system -o jsonpath="{.data.password}" | base64 -d'})," (beware of trailing ",(0,i.jsx)(n.code,{children:"%"})," symbol in the terminal, it is not part of the password)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"login-page",src:t(8700).c+"",width:"3004",height:"1684"})}),"\n",(0,i.jsx)(n.h4,{id:"the-krateo-ui",children:"The Krateo UI"}),"\n",(0,i.jsxs)(n.p,{children:["After logging in you will be presented the Krateo's starter UI\n",(0,i.jsx)(n.img,{alt:"dashboard-page",src:t(1320).c+"",width:"3016",height:"1686"})]}),"\n",(0,i.jsx)(n.h3,{id:"create-a-namespace-for-our-widgets",children:"Create a namespace for our widgets."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"kubectl create ns simple-guide\n"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-button-widget",children:"Creating a Button widget."}),"\n",(0,i.jsxs)(n.p,{children:["The creation of a Button widget is as simple as applying a yaml a kind of type Button with the required properties inside ",(0,i.jsx)(n.code,{children:"spec.widgetData"}),". (widgetData validation is run when doing an apply to make sure required properties are present)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cat <<EOF | kubectl apply -f -\nkind: Button\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: simple-guide-button\n  namespace: simple-guide\nspec:\n  widgetData:\n    icon: fa-sun\n    label: My Custom Button\n    clickActionId: none\n    actions: {}\nEOF\n"})}),"\n",(0,i.jsx)(n.p,{children:"To verify the widget has been correctly created, run"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"kubectl get button -n  simple-guide\n"})}),"\n",(0,i.jsx)(n.h2,{id:"showing-the-button-widget-in-a-new-page",children:"Showing the Button widget in a new Page"}),"\n",(0,i.jsx)(n.p,{children:"The Button widget is correctly created in the cluster, but in order for it to be visible is needs to be references by another visible widget."}),"\n",(0,i.jsxs)(n.p,{children:["We will insert the ",(0,i.jsx)(n.code,{children:"Button"})," in a new ",(0,i.jsx)(n.code,{children:"Page"})," widget."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cat <<EOF | kubectl apply -f -\nkind: Page\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: simple-guide-page\n  namespace: simple-guide\nspec:\n  widgetData:\n    allowedResources:\n      - buttons\n    items:\n      - resourceRefId: simple-button-id # <- this need to match the id of and item in spec.resourcesRefs\n  resourcesRefs:\n    items:\n      - id: simple-button-id\n        apiVersion: widgets.templates.krateo.io/v1beta1\n        name: simple-guide-button # <- matches metadata.name of the button widgetw e created\n        namespace: simple-guide\n        resource: buttons\n        verb: GET\nEOF\n"})}),"\n",(0,i.jsxs)(n.p,{children:["by examining the previous yaml we can see that we referenced our Button by name in ",(0,i.jsx)(n.code,{children:"spec.resourcesRefs.items[0]"})," and added an id (",(0,i.jsx)(n.code,{children:"simple-button-id"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["Declaring resurces in ",(0,i.jsx)(n.code,{children:"spec.resourcesRefs"})," is the way Krateo knows to load these widgets, they can be declare manually like in our case or dynamically (see ",(0,i.jsx)(n.code,{children:"resourcesRefsTemplate"})," section in ",(0,i.jsx)(n.a,{href:"/key-concepts/kcp/frontend",children:"docs"})," for more info.) This concept is generic to any widget and is used to load other resources."]}),"\n",(0,i.jsx)(n.h2,{id:"where-is-the-page",children:"Where is the Page?"}),"\n",(0,i.jsxs)(n.p,{children:["We have created a ",(0,i.jsx)(n.code,{children:"Button"})," and a ",(0,i.jsx)(n.code,{children:"Page"})," that references the ",(0,i.jsx)(n.code,{children:"Button"})," but nothing is yet visible in the UI."]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-new-link-in-the-sidebar",children:"Creating a new link in the sidebar"}),"\n",(0,i.jsxs)(n.p,{children:["We need a way to navigato to this page, to do so we will create a ",(0,i.jsx)(n.code,{children:"NavMenuItem"})," that point reference the newly created page by running"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cat <<EOF | kubectl apply -f -\nkind: NavMenuItem\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: simple-guide-nav-menu-item\n  namespace: simple-guide\nspec:\n  widgetData:\n    allowedResources:\n      - pages\n    resourceRefId: page-id # <- reference the id of a widget declared below in spec.resourcesRefs\n    label: Guide New Page\n    icon: fa-sun\n    path: /simple-guide\n    order: 90 # <- this is used to order the item in the menu, anything with a lower order will be placed before this one\n  resourcesRefs:\n    items:\n      - id: page-id\n        apiVersion: widgets.templates.krateo.io/v1beta1\n        name: simple-guide-page # <- matches metadata.name of the page widget we created in the previous step\n        namespace: simple-guide\n        resource: pages\n        verb: GET\nEOF\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now refreshing the page will show the newly navigation item in the sidebar\n",(0,i.jsx)(n.img,{alt:"sidebar-item",src:t(4180).c+"",width:"3016",height:"1686"})]}),"\n",(0,i.jsx)(n.h3,{id:"visiting-the-new-page",children:"Visiting the new page"}),"\n",(0,i.jsxs)(n.p,{children:["Clicking to the new sidebar menu will navigate to the path declared in the ",(0,i.jsx)(n.code,{children:"NavMenuItem"})," ",(0,i.jsx)(n.code,{children:"spec.widgetData.path"})," property and finally display our ",(0,i.jsx)(n.code,{children:"Button"})," widget!"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"simple-guide-page",src:t(8560).c+"",width:"3016",height:"1686"})}),"\n",(0,i.jsx)(n.h2,{id:"recap",children:"Recap"}),"\n",(0,i.jsxs)(n.p,{children:["We created a hierarchy or widget declaratively\n",(0,i.jsx)(n.code,{children:"NavMenuItem"})," -> ",(0,i.jsx)(n.code,{children:"Page"})," -> ",(0,i.jsx)(n.code,{children:"Button"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Widgets load other widgets via by referencing them inside ",(0,i.jsx)(n.code,{children:"spec.resourcesRefs"})," and display them by using referencing the ",(0,i.jsx)(n.code,{children:"resourcesRef"})," id inside ",(0,i.jsx)(n.code,{children:"spec.widgetData"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"testing-the-declarative-nature-of-widgets",children:"Testing the declarative nature of widgets"}),"\n",(0,i.jsxs)(n.p,{children:["Try editing the ",(0,i.jsx)(n.code,{children:"spec.label"})," prop of the yaml file in ",(0,i.jsx)(n.code,{children:"guide-simple-button.yaml"})," or ",(0,i.jsx)(n.code,{children:"guide-simple-navmenuitem.yaml"})," and apply the changes."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cat <<EOF | kubectl apply -f -\nkind: Button\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: simple-guide-button\n  namespace: simple-guide\nspec:\n  widgetData:\n    icon: fa-sun\n    label: I was updated\n    clickActionId: none\n    actions: {}\n---\nkind: NavMenuItem\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: simple-guide-nav-menu-item\n  namespace: simple-guide\nspec:\n  widgetData:\n    allowedResources:\n      - pages\n    resourceRefId: page-id # <- reference the id of a widget declared below in spec.resourcesRefs\n    label: Updated link\n    icon: fa-sun\n    path: /simple-guide\n    order: 90 # <- this is used to order the item in the menu, anything with a lower order will be placed before this one\n  resourcesRefs:\n    items:\n      - id: page-id\n        apiVersion: widgets.templates.krateo.io/v1beta1\n        name: simple-guide-page # <- matches metadata.name of the page widget we created in the previous step\n        namespace: simple-guide\n        resource: pages\n        verb: GET\nEOF\n"})}),"\n",(0,i.jsx)(n.p,{children:"After a refresh of the page you'll be able to see the changes reflected in the UI"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"simple-guide-page-updated",src:t(2439).c+"",width:"3016",height:"1686"})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.code,{children:"Button"})," that does nothing is not very useful, in the next guide we will see how to update the ",(0,i.jsx)(n.code,{children:"Button"})," to trigger an action on click."]}),"\n",(0,i.jsxs)(n.p,{children:["Next: ",(0,i.jsx)(n.a,{href:"/how-to-guides/write-frontend/action-button-guide",children:"Action button"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8700:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/01_login-1363535d1eefbc24aaea96144cebb540.png"},1320:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/04_dashboard_1blueprint_true-0bbc30b583f563619847cd54ac8ba543.png"},4180:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/01_sidebar_item-e093d898a21919da920deebe353d2d62.png"},8560:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/02_simple_guide_page-5ee873a47979c688f75dc98fcf477532.png"},2439:(e,n,t)=>{t.d(n,{c:()=>i});const i=t.p+"assets/images/03_simple_guide_page_updated-0e458c41bb109d5b64dfcf20095f5aa4.png"},2172:(e,n,t)=>{t.d(n,{I:()=>d,M:()=>r});var i=t(1504);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);