"use strict";(self.webpackChunkkrateo_v_2_docs=self.webpackChunkkrateo_v_2_docs||[]).push([[540],{9740:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=t(7624),i=t(2172);const r={},d="frontend",a={id:"key-concepts/kcp/frontend",title:"frontend",description:"Our frontend (https://github.com/krateoplatformops/frontend) can be defined as a data-driven meta-framework, but what does that mean exactly? Essentially, we created an architecture that ensures a consistent user experience by design. This is achieved by pre-packaging graphic elements and layouts that can be used and composed to build the portal pages.",source:"@site/docs/20-key-concepts/20-kcp/10-frontend.md",sourceDirName:"20-key-concepts/20-kcp",slug:"/key-concepts/kcp/frontend",permalink:"/key-concepts/kcp/frontend",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"provider-runtime",permalink:"/key-concepts/kco/provider-runtime"},next:{title:"frontend-widget-api-reference",permalink:"/key-concepts/kcp/frontend-widget-api-reference"}},o={},c=[{value:"Anatomy of a widget",id:"anatomy-of-a-widget",level:2},{value:"widgetData",id:"widgetdata",level:2},{value:"widgetDataTemplate",id:"widgetdatatemplate",level:2},{value:"Simple example",id:"simple-example",level:3},{value:"Complete example",id:"complete-example",level:3},{value:"Hoes does it work?",id:"hoes-does-it-work",level:3},{value:"actions",id:"actions",level:2},{value:"Rest Action",id:"rest-action",level:3},{value:"Example",id:"example",level:4},{value:"Navigate action",id:"navigate-action",level:3},{value:"OpenDrawer action",id:"opendrawer-action",level:3},{value:"OpenModal action",id:"openmodal-action",level:3},{value:"composing widgets",id:"composing-widgets",level:2},{value:"resourcesRefs",id:"resourcesrefs",level:3},{value:"resourcesRefsTemplate",id:"resourcesrefstemplate",level:3},{value:"Widgets API reference",id:"widgets-api-reference",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"frontend",children:"frontend"}),"\n",(0,s.jsxs)(n.p,{children:["Our frontend (",(0,s.jsx)(n.a,{href:"https://github.com/krateoplatformops/frontend",children:"https://github.com/krateoplatformops/frontend"}),") can be defined as a data-driven meta-framework, but what does that mean exactly? Essentially, we created an architecture that ensures a consistent user experience by design. This is achieved by pre-packaging graphic elements and layouts that can be used and composed to build the portal pages."]}),"\n",(0,s.jsx)(n.p,{children:"It's important to note that the Krateo portal should not be seen as a black box, but rather as a central point for collecting valuable information for the platform's users, which is distributed across different systems."}),"\n",(0,s.jsx)(n.p,{children:"Another important requirement is that the portal must be easily extendable without requiring any coding. All efforts should be focused on understanding how to display services in the catalog, rather than on maintaining forms for collecting information."}),"\n",(0,s.jsxs)(n.p,{children:["In summary, the Krateo frontend queries the backend (Kubernetes) via ",(0,s.jsx)(n.em,{children:"snowplow"})," to know which layouts and graphic elements must processed with client-side runtime rendering."]}),"\n",(0,s.jsx)(n.h1,{id:"widgets",children:"Widgets"}),"\n",(0,s.jsx)(n.p,{children:"In Krateo Composable Portal everything is based on the concept of widgets and their composition, a widget is a k8s CRD that maps to a UI element in the frontend (eg a Button) or to a configuration used by other widget (eg a Route)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/key-concepts/kcp/frontend-widget-api-reference",children:"see all widgets"})}),"\n",(0,s.jsx)(n.h2,{id:"anatomy-of-a-widget",children:"Anatomy of a widget"}),"\n",(0,s.jsxs)(n.p,{children:["A widget source of truth is a JSON schema that is used to generate a CRD, this allow each widget to have it's own Kind and schema validation at the moment of apply\nexample: ",(0,s.jsx)(n.a,{href:"https://github.com/krateoplatformops/frontend/blob/main/src/widgets/Button/Button.schema.json",children:"src/widgets/Button/Button.schema.json"})]}),"\n",(0,s.jsx)(n.h2,{id:"widgetdata",children:"widgetData"}),"\n",(0,s.jsxs)(n.p,{children:["Every widget has a ",(0,s.jsx)(n.code,{children:"widgetData"})," property that contains data used to control how the widget looks like or behave in the Frontend Composable Portal, in this example we are defining a ",(0,s.jsx)(n.code,{children:"label"}),", an ",(0,s.jsx)(n.code,{children:"icon"})," (using ",(0,s.jsx)(n.a,{href:"https://fontawesome.com/search?ip=classic&s=solid&o=r",children:"fontawesome"})," naming convention) and a ",(0,s.jsx)(n.code,{children:"type"})," that control the the visual style of the button, in the button ",(0,s.jsx)(n.a,{href:"/key-concepts/kcp/frontend-widget-api-reference",children:"API references"})," can be seen all possible values."]}),"\n",(0,s.jsx)(n.p,{children:"Let's explore a basic Button widget"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# button.yaml\nkind: Button\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: button-1\n  namespace: krateo-system\nspec:\n  widgetData:\n    label: This is a button\n    icon: fa-sun\n    type: primary\n"})}),"\n",(0,s.jsx)(n.h2,{id:"widgetdatatemplate",children:"widgetDataTemplate"}),"\n",(0,s.jsxs)(n.p,{children:["Every widget supports the property ",(0,s.jsx)(n.code,{children:"spec.widgetDataTemplate"})," that allows overriding a specific value defined in ",(0,s.jsx)(n.code,{children:"spec.widgetData"}),", this is useful to inject dynamic content inside a widget."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" widgetDataTemplate:\n    - forPath: data\n      expression: ${ .namespaces }\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"widgetDataTemplate"})," accepts an array of objects with ",(0,s.jsx)(n.code,{children:"forPath"})," and ",(0,s.jsx)(n.code,{children:"expression"})," keys."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"forPath"})," is used to chose what key in ",(0,s.jsx)(n.code,{children:"widgetData"})," to override, it uses dot notation to reference nested data eg ",(0,s.jsx)(n.code,{children:"parentProperty.childProperty"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"expression"})," is a ",(0,s.jsx)(n.a,{href:"https://jqlang.org/",children:"jq"})," expression that uses the result of the jq expression as the data to be injected in the specified path"]}),"\n",(0,s.jsx)(n.h3,{id:"simple-example",children:"Simple example"}),"\n",(0,s.jsx)(n.p,{children:"In the example below, the label of the button will be the date when the widget is loaded, as the data from widgetDataTemplate is substituted dynamically at the moment of loading a widget"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'kind: Button\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: button-post-nginx\n  namespace: krateo-system\nspec:\n  widgetData:\n    label: button 1\n    icon: fa-rocket\n    type: primary\n  widgetDataTemplate:\n    - forPath: label\n      expression: ${ now | strftime("%Y-%m-%d") }\n'})}),"\n",(0,s.jsx)(n.h3,{id:"complete-example",children:"Complete example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'kind: Table\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: table-of-namespaces\n  namespace: krateo-system\nspec:\n  widgetData:\n    pageSize: 10\n    data: []\n    columns:\n      - valueKey: name\n        title: Cluster Namespaces\n\n  widgetDataTemplate:\n    - forPath: data\n      expression: ${ .namespaces }\n  apiRef:\n    name: cluster-namespaces\n    namespace: krateo-system\n\n\n---\napiVersion: templates.krateo.io/v1\nkind: RESTAction\nmetadata:\n  name: cluster-namespaces\n  namespace: krateo-system\nspec:\n  api:\n  - name: namespaces\n    path: "/api/v1/namespaces"\n    filter: "[.items[] | {name: .metadata.name}]"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In the example above, we declared a table with a single column ",(0,s.jsx)(n.code,{children:"name"})," to display all namespaces of the cluster.\nThe data is loaded directly from the k8s api server"]}),"\n",(0,s.jsx)(n.h3,{id:"hoes-does-it-work",children:"Hoes does it work?"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"widgetDataTemplate:\n    - forPath: data\n      expression: ${ .namespaces }\n"})}),"\n",(0,s.jsxs)(n.p,{children:["What is ",(0,s.jsx)(n.code,{children:".namespaces"}),"?"]}),"\n",(0,s.jsxs)(n.p,{children:["In the expression ",(0,s.jsx)(n.code,{children:".namespace"})," reference the result of an api called ",(0,s.jsx)(n.code,{children:"namespaces"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The Table widget has a field ",(0,s.jsx)(n.code,{children:"spec.apiRef"})," that references a RESTAction by name (",(0,s.jsx)(n.code,{children:"cluster-namespaces"}),"), an ",(0,s.jsx)(n.code,{children:"api"})," with name ",(0,s.jsx)(n.code,{children:"namespaces"})," is declared in the RESTAction's ",(0,s.jsx)(n.code,{children:"spec.api"})," array"]}),"\n",(0,s.jsxs)(n.p,{children:["By this chain of references ",(0,s.jsx)(n.code,{children:"Widget -> apiRef -> RESTAction -> api"})," widgetDataTemplate is able to refecence an api by name"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'apiVersion: templates.krateo.io/v1\nkind: RESTAction\nmetadata:\n  name: cluster-namespaces\n  namespace: krateo-system\nspec:\n  api:\n  - name: namespaces\n    path: "/api/v1/namespaces"\n    filter: "[.items[] | {name: .metadata.name}]"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["As shown above, the endpoint called is ",(0,s.jsx)(n.code,{children:"/api/v1/namespaces"})," which call the k8s api server, if this were an absolute URL it could reference external APIs, see the ",(0,s.jsx)(n.a,{href:"https://docs.krateo.io/key-concepts/kcp/snowplow-restactions/",children:"RESTActions documentation"})," for more details and learning how to authenticate to external APIs."]}),"\n",(0,s.jsx)(n.h2,{id:"actions",children:"actions"}),"\n",(0,s.jsx)(n.p,{children:"Actions are a way to declare widget behavious and user interactions."}),"\n",(0,s.jsx)(n.p,{children:"The currencly supported actions are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"rest"}),"\n",(0,s.jsx)(n.li,{children:"navigate"}),"\n",(0,s.jsx)(n.li,{children:"openDrawer"}),"\n",(0,s.jsx)(n.li,{children:"openModal"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Widgets can define actions inside widgetData"}),"\n",(0,s.jsx)(n.h3,{id:"rest-action",children:"Rest Action"}),"\n",(0,s.jsx)(n.p,{children:"Used to trigger an HTTP request to a specified resource (mathing the resourceRefId)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Additional Info"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"payloadKey"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Key used to nest the payload in the request body"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"id"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Unique identifier for the action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resourceRefId"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The identifier of the k8s custom resource that should be represented"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"requireConfirmation"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Whether user confirmation is required before triggering the action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onSuccessNavigateTo"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"URL to navigate to after successful execution"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onEventNavigateTo"}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Conditional navigation triggered by a specific event"}),(0,s.jsx)(n.td,{children:"additionalProperties: false"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onEventNavigateTo.eventReason"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Identifier of the awaited event reason"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onEventNavigateTo.url"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"URL to navigate to when the event is received"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onEventNavigateTo.timeout"}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The timeout in seconds to wait for the event"}),(0,s.jsx)(n.td,{children:"Default: 50"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"loading"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Defines the loading indicator behavior for the action"}),(0,s.jsx)(n.td,{children:'Enum: ["global", "inline", "none"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Type of action to execute"}),(0,s.jsx)(n.td,{children:'Enum: ["rest"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"payload"}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Static payload sent with the request"}),(0,s.jsx)(n.td,{children:"additionalProperties: true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"payloadToOverride"}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"List of payload fields to override dynamically"}),(0,s.jsx)(n.td,{children:"Array of objects"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"payloadToOverride.name"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Name of the field to override"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"payloadToOverride.value"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Value to use for overriding the field"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["This is an example of a button that when clicked, creates a new nginx pod named ",(0,s.jsx)(n.code,{children:"my-nginx"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kind: Button\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: button-post-nginx\n  namespace: krateo-system\nspec:\n  widgetData:\n    label: button 1\n    icon: fa-rocket\n    type: primary\n    clickActionId: action-1\n    actions:\n      rest:\n        - id: action-1\n          resourceRefId: resource-ref-1\n          type: rest\n          payload:\n            apiVersion: v1\n            kind: Pod\n            metadata:\n              name: nginx-pod-789\n            spec:\n              containers:\n                - image: 'nginx:latest'\n                  name: nginx\n                  ports:\n                    - containerPort: 80\n\n  resourcesRefs:\n    - id: resource-ref-1\n      apiVersion: v1\n      resource: pods\n      name: my-nginx\n      namespace: krateo-system\n      verb: POST\n"})}),"\n",(0,s.jsx)(n.h3,{id:"navigate-action",children:"Navigate action"}),"\n",(0,s.jsx)(n.p,{children:"Navigate to a different URL"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Additional Info"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"id"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Unique identifier for the action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Type of navigation action"}),(0,s.jsx)(n.td,{children:'Enum: ["navigate"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Name of the navigation action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resourceRefId"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The identifier of the k8s custom resource that should be represented"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"requireConfirmation"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Whether user confirmation is required before navigating"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"loading"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Defines the loading indicator behavior during navigation"}),(0,s.jsx)(n.td,{children:'Enum: ["global", "inline", "none"]'})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"opendrawer-action",children:"OpenDrawer action"}),"\n",(0,s.jsx)(n.p,{children:"Display another widget, referenced by resourceRefId inside a drawer (side panel)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Additional Info"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"id"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Unique identifier for the drawer action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Type of drawer action"}),(0,s.jsx)(n.td,{children:'Enum: ["openDrawer"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resourceRefId"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The identifier of the k8s custom resource that should be represented"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"requireConfirmation"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Whether user confirmation is required before opening"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"loading"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Defines the loading indicator behavior for the drawer"}),(0,s.jsx)(n.td,{children:'Enum: ["global", "inline", "none"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"size"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Drawer size to be displayed"}),(0,s.jsx)(n.td,{children:'Enum: ["default", "large"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"title"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Title shown in the drawer header"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"openmodal-action",children:"OpenModal action"}),"\n",(0,s.jsx)(n.p,{children:"Display another widget, referenced by resourceRefId inside a modal"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Additional Info"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"id"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Unique identifier for the modal action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Type of modal action"}),(0,s.jsx)(n.td,{children:'Enum: ["openModal"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Name of the modal action"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resourceRefId"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The identifier of the k8s custom resource that should be represented"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"requireConfirmation"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Whether user confirmation is required before opening"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"loading"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Defines the loading indicator behavior for the modal"}),(0,s.jsx)(n.td,{children:'Enum: ["global", "inline", "none"]'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"title"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Title shown in the modal header"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"composing-widgets",children:"composing widgets"}),"\n",(0,s.jsxs)(n.p,{children:["In order to compose complex and more powetful UIs, widgets needs a way to reference other widgets and RESTActions, this is possible via the ",(0,s.jsx)(n.code,{children:"spec.resourcesRefs"})," property"]}),"\n",(0,s.jsx)(n.h3,{id:"resourcesrefs",children:"resourcesRefs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kind: Row\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: my-row\n  namespace: krateo-system\nspec:\n  widgetData:\n    items:\n      - resourceRefId: pie-chart-inside-column\n        size: 6\n      - resourceRefId: table-of-pods\n        size: 18\n  resourcesRefs:\n    - id: table-of-pods\n      apiVersion: widgets.templates.krateo.io/v1beta1\n      name: table-of-pods\n      namespace: krateo-system\n      resource: tables\n      verb: GET\n    - id: pie-chart-inside-column\n      apiVersion: widgets.templates.krateo.io/v1beta1\n      name: pie-chart-inside-column\n      namespace: krateo-system\n      resource: piecharts\n      verb: GET\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the example above we can see ",(0,s.jsx)(n.code,{children:"resourcesRefs"})," declaring a list of other resources and a user-defined ID. A widget of kind ",(0,s.jsx)(n.code,{children:"Row"})," use a matching ID to reference and display other resource, in this example it will display the items in order or declaration, ",(0,s.jsx)(n.code,{children:"pie-chart-inside-column"})," on top and ",(0,s.jsx)(n.code,{children:"table-of-pods"})," below regardless of the order of the resourcesRefs."]}),"\n",(0,s.jsx)(n.h3,{id:"resourcesrefstemplate",children:"resourcesRefsTemplate"}),"\n",(0,s.jsxs)(n.p,{children:["Similar to ",(0,s.jsx)(n.code,{children:"widgetDataTemplate"}),", ",(0,s.jsx)(n.code,{children:"resourcesRefsTemplate"})," allows to populate ",(0,s.jsx)(n.code,{children:"resourcesRefs"})," with dynamic data coming from an ",(0,s.jsx)(n.code,{children:"api"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kind: Row\napiVersion: widgets.templates.krateo.io/v1beta1\nmetadata:\n  name: templates-row\n  namespace: my-namespace\nspec:\n  apiRef:\n    name: templates-panels\n    namespace: my-namespace\n  widgetData:\n    items: []\n  widgetDataTemplate:\n    - forPath: items\n      expression: >\n        ${ [ .templatespanels[] | { resourceRefId: .metadata.name, size: 12 } ] }\n  resourcesRefs: []\n  resourcesRefsTemplate:\n    - iterator: ${ .templatespanels }\n      template:\n        id: ${ .metadata.name }\n        apiVersion: ${ .apiVersion }\n        resource: panels\n        namespace: ${ .metadata.namespace }\n        name: ${ .metadata.name }\n        verb: GET\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the example above ",(0,s.jsx)(n.code,{children:"resourcesRefsTemplate"})," declares an iterator, that loop over the result of an api called ",(0,s.jsx)(n.code,{children:"templatespanels"})," and populate resourcesRefs with it.\nif ",(0,s.jsx)(n.code,{children:"resourcesRefs"})," has some manually filled items they will be merged with the result of resourcesRefsTemplate"]}),"\n",(0,s.jsx)(n.p,{children:"As a quick recap of what is happing:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["the widget references a RESTAction with name templates-panels in ",(0,s.jsx)(n.code,{children:"apiRef"})]}),"\n",(0,s.jsxs)(n.li,{children:["templates-panels RESTAction declares an api called ",(0,s.jsx)(n.code,{children:"templatespanels"})]}),"\n",(0,s.jsxs)(n.li,{children:["resourcesRefsTemplate's iterator uss the result of ",(0,s.jsx)(n.code,{children:"templatespanels"})," to populate them items that will be part of resourcesRefs"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"widgets-api-reference",children:"Widgets API reference"}),"\n",(0,s.jsxs)(n.p,{children:["An api reference listing all widgets and their ",(0,s.jsx)(n.code,{children:"widgetData"})," is available at ",(0,s.jsx)(n.a,{href:"/key-concepts/kcp/frontend-widget-api-reference",children:"widgets-api-reference.md"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},2172:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>d});var s=t(1504);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);