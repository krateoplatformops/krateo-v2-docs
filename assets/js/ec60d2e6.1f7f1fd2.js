"use strict";(self.webpackChunkkrateo_v_2_docs=self.webpackChunkkrateo_v_2_docs||[]).push([[1832],{1672:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>p});var t=r(7624),o=r(2172);const s={},i="finops-prometheus-scraper-generic",a={id:"key-concepts/kcf/finops-components/finops-prometheus-scraper-generic",title:"finops-prometheus-scraper-generic",description:"This repository is part of the wider exporting architecture for the Krateo Composable FinOps and scrapes Prometheus exporters to then upload the data to CrateDB through the finops-database-handler.",source:"@site/docs/20-key-concepts/30-kcf/20-finops-components/60-finops-prometheus-scraper-generic.md",sourceDirName:"20-key-concepts/30-kcf/20-finops-components",slug:"/key-concepts/kcf/finops-components/finops-prometheus-scraper-generic",permalink:"/key-concepts/kcf/finops-components/finops-prometheus-scraper-generic",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:60,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"finops-prometheus-exporter-generic",permalink:"/key-concepts/kcf/finops-components/finops-prometheus-exporter-generic"},next:{title:"Krateo OASGen Provider",permalink:"/key-concepts/kog/oasgen-provider"}},c={},p=[{value:"Summary",id:"summary",level:2},{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Dependencies",id:"dependencies",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.M)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"finops-prometheus-scraper-generic",children:"finops-prometheus-scraper-generic"}),"\n",(0,t.jsxs)(n.p,{children:["This repository is part of the wider exporting architecture for the Krateo Composable FinOps and scrapes Prometheus exporters to then upload the data to CrateDB through the ",(0,t.jsx)(n.a,{href:"https://github.com/krateoplatformops/finops-database-handler",children:"finops-database-handler"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For an in-depth look at the architecture and how to configure all the components, download the summary document ",(0,t.jsx)(n.a,{href:"https://github.com/krateoplatformops/finops-operator-exporter/resources/Krateo_Composable_FinOps___Full.pdf",children:"here"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#architecture",children:"Architecture"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#configuration",children:"Configuration"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:['This component is tasked with scraping a given Prometheus endpoint. The configuration is obtained from a file mounted inside the container in "/config/config.yaml". The scraper uploads all the data to a CrateDB instance, through the ',(0,t.jsx)(n.a,{href:"https://github.com/krateoplatformops/finops-database-handler",children:"finops-database-handler"}),", as reported in the database-config field."]}),"\n",(0,t.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Krateo Composable FinOps Prometheus Scraper Generic",src:r(1732).c+"",width:"1964",height:"683"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"This container is automatically started by the FinOps Operator Scraper and you do not need to install it manually."}),"\n",(0,t.jsx)(n.p,{children:"To build the executable:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"make build REPO=<your-registry-here>\n"})}),"\n",(0,t.jsx)(n.p,{children:"To build and push the Docker images:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"make container REPO=<your-registry-here>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsx)(n.p,{children:"There is the need to have an active CrateDB database, with the Krateo Database Service installed. Its login details must be placed in the database-config CR:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: finops.krateo.io/v1\nkind: DatabaseConfig\nmetadata:\n  name: # DatabaseConfig name\n  namespace: # DatabaseConfig namespace\nspec:\n  username: # username string\n  passwordSecretRef: # object reference to secret with password\n    name: # secret name\n    namespace: # secret namespace\n    key: # secret key\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},1732:(e,n,r)=>{r.d(n,{c:()=>t});const t=r.p+"assets/images/KCF-scraper-46d836eea0a66e7a0dcdc7756e2d088a.png"},2172:(e,n,r)=>{r.d(n,{I:()=>a,M:()=>i});var t=r(1504);const o={},s=t.createContext(o);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);