<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-key-concepts/kcf/finops-introduction" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Krateo Composable FinOps | Krateo PlatformOps Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.krateo.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.krateo.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.krateo.io/key-concepts/kcf/finops-introduction"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Krateo Composable FinOps | Krateo PlatformOps Docs"><meta data-rh="true" name="description" content="The Krateo Composable FinOps module is a tool to collect costs and metrics from service providers and on-premises systems, to allow for the showback and optimization of resource utilization. The metrics collected include the costs, but also utilization of resources such as CPU, memory, and also carbon intensity, but this list could include any type of metric that we want to optimize for that is exposed through an API."><meta data-rh="true" property="og:description" content="The Krateo Composable FinOps module is a tool to collect costs and metrics from service providers and on-premises systems, to allow for the showback and optimization of resource utilization. The metrics collected include the costs, but also utilization of resources such as CPU, memory, and also carbon intensity, but this list could include any type of metric that we want to optimize for that is exposed through an API."><link data-rh="true" rel="icon" href="/img/favicon_io/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.krateo.io/key-concepts/kcf/finops-introduction"><link data-rh="true" rel="alternate" href="https://docs.krateo.io/key-concepts/kcf/finops-introduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.krateo.io/key-concepts/kcf/finops-introduction" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6738e5fb.css">
<script src="/assets/js/runtime~main.57bf59a5.js" defer="defer"></script>
<script src="/assets/js/main.c69d6748.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/black-horizontal.svg" alt="Krateo PlatformOps Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/white-horizontal.svg" alt="Krateo PlatformOps Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/krateoplatformops/krateo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://killercoda.com/krateoplatformops/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Krateo Free Self-Service Labs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/key-concepts/kco/core-provider">Key Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/key-concepts/kco/core-provider">Krateo Composable Operations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/key-concepts/kcp/frontend">Krateo Composable Portal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/key-concepts/kcf/finops-introduction">Krateo Composable FinOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/key-concepts/kcf/finops-introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/key-concepts/kcf/finops-components/finops-operator-exporter">Components</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/key-concepts/kog/oasgen-provider">Krateo Operator Generator</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/how-to-guides/install-krateo/installing-krateo-kind">How-to guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/core-crd-reference/core-provider-crd">Krateo CRD Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/provider-crd-reference/azuredevops-provider-crd">Provider CRD Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/provider-reference/github-provider-kog">Provider Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/release-notes/release-note-2-5-0">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Key Concepts</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Krateo Composable FinOps</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Krateo Composable FinOps</h1>
<p>The Krateo Composable FinOps module is a tool to collect costs and metrics from service providers and on-premises systems, to allow for the showback and optimization of resource utilization. The metrics collected include the costs, but also utilization of resources such as CPU, memory, and also carbon intensity, but this list could include any type of metric that we want to optimize for that is exposed through an API.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-architecture">Complete Architecture<a href="#complete-architecture" class="hash-link" aria-label="Direct link to Complete Architecture" title="Direct link to Complete Architecture">​</a></h2>
<p>The complete architecture is summarized by the following graph:
<img decoding="async" loading="lazy" alt="Krateo Composable FinOps Overview" src="/assets/images/KCF-overview-634b6f33a96e63a2bd230d6271f706c8.png" width="1331" height="716" class="img_ev3q"></p>
<p>The architecture relies on the concept of exporters and scrapers, a duo of applications that is tasked with collecting information from an API source, exporting it, and then scraping it for storage and later utilization. The exporter is basically a webservice that exposes an endpoint where data can be read from in a certain format, in this case, Prometheus&#x27;. The scraper, instead, is a service that connects to the exporter and collects all the data (i.e., by scraping it) and then querying the database to store it.</p>
<p>The cost data is stored in the FinOps Cost and Usage Specification, FOCUS. It is a data representation that can show in a single view costs, discounts, commitments and usage, allowing to reduce significantly the overhead of data storage and analysis compared to traditional methods. It is also widely adopted and available in all major cloud service providers (e.g., Azure, GCP, AWS and Tencent cloud).</p>
<p>The usage data is also stored in the database, however, usages are usually timeseries data, which allow analysis, pattern recognition and forecasting to be done on it to gain useful insights.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-collection">Data Collection<a href="#data-collection" class="hash-link" aria-label="Direct link to Data Collection" title="Direct link to Data Collection">​</a></h3>
<p>The first part of the module is responsible for data collection. This module is composed by the following units:</p>
<ul>
<li><a href="https://github.com/krateoplatformops/finops-data-types" target="_blank" rel="noopener noreferrer">finops-data-types</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-exporter" target="_blank" rel="noopener noreferrer">finops-operator-exporter</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-exporter-chart" target="_blank" rel="noopener noreferrer">finops-operator-exporter-chart</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-scraper" target="_blank" rel="noopener noreferrer">finops-operator-scraper</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-scraper-chart" target="_blank" rel="noopener noreferrer">finops-operator-scraper-chart</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-focus" target="_blank" rel="noopener noreferrer">finops-operator-focus</a></li>
<li><a href="https://github.com/krateoplatformops/finops-operator-focus-chart" target="_blank" rel="noopener noreferrer">finops-operator-focus-chart</a></li>
<li><a href="https://github.com/krateoplatformops/finops-database-handler" target="_blank" rel="noopener noreferrer">finops-database-handler</a></li>
<li><a href="https://github.com/krateoplatformops/finops-database-handler-chart" target="_blank" rel="noopener noreferrer">finops-database-handler-chart</a></li>
<li><a href="https://github.com/krateoplatformops/finops-prometheus-exporter-generic" target="_blank" rel="noopener noreferrer">finops-prometheus-exporter-generic</a></li>
<li><a href="https://github.com/krateoplatformops/finops-prometheus-resource-exporter-azure" target="_blank" rel="noopener noreferrer">finops-prometheus-resource-exporter-azure</a></li>
<li><a href="https://github.com/krateoplatformops/finops-prometheus-scraper-generic" target="_blank" rel="noopener noreferrer">finops-prometheus-scraper-generic</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-presentation">Data Presentation<a href="#data-presentation" class="hash-link" aria-label="Direct link to Data Presentation" title="Direct link to Data Presentation">​</a></h3>
<p>The second module is responsible for the showback of data inside Krateo&#x27;s frontend. It includes one main module:</p>
<ul>
<li><a href="https://github.com/krateoplatformops/finops-composition-definition-parser" target="_blank" rel="noopener noreferrer">finops-composition-definition-parser</a></li>
<li><a href="https://github.com/krateoplatformops/finops-composition-definition-parser-chart" target="_blank" rel="noopener noreferrer">finops-composition-definition-parser-chart</a></li>
</ul>
<p>Additionally, as an example application or use case, there is the Azure pricing API plugin for KOG/RDC and its composition for automatic pricing upload:</p>
<ul>
<li><a href="https://github.com/krateoplatformops/azure-pricing-rest-dynamic-controller-plugin" target="_blank" rel="noopener noreferrer">azure-pricing-rest-dynamic-controller-plugin</a></li>
<li><a href="https://github.com/krateoplatformops/azure-pricing-rest-dynamic-controller-plugin-chart" target="_blank" rel="noopener noreferrer">azure-pricing-rest-dynamic-controller-plugin-chart</a></li>
<li><a href="https://github.com/krateoplatformops/focus-data-presentation-azure" target="_blank" rel="noopener noreferrer">focus-data-presentation-azure</a></li>
</ul>
<p>This component allows to show pricing information on the frontend cards through API calls to the <a href="https://github.com/krateoplatformops/finops-database-handler" target="_blank" rel="noopener noreferrer">finops-database-handler</a> notebooks.
The full example can be found here: <a href="https://github.com/krateoplatformops/krateo-v2-template-finops-example-pricing-vm-azure" target="_blank" rel="noopener noreferrer">Krateo FinOps Example Composition</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimization">Optimization<a href="#optimization" class="hash-link" aria-label="Direct link to Optimization" title="Direct link to Optimization">​</a></h3>
<p>The third module is responsible for optimizations, and a usage example is available in the <a href="https://github.com/krateoplatformops/krateo-v2-template-finops-example-pricing-vm-azure" target="_blank" rel="noopener noreferrer">Krateo FinOps Example Composition</a>.</p>
<p>The optimizations rely on Open Policy Agent (OPA). The instances of this composition definition will install it automatically through the <a href="https://github.com/krateoplatformops/finops-webhook-template-chart" target="_blank" rel="noopener noreferrer">finops-webhook-template-chart</a>, which is imported as a dependency. The composition relies on the OPA policies in <a href="https://github.com/krateoplatformops/finops-moving-window-policy" target="_blank" rel="noopener noreferrer">finops-moving-window-policy</a> to call the endpoint of the <a href="https://github.com/krateoplatformops/finops-moving-window-microservice" target="_blank" rel="noopener noreferrer">finops-moving-window-optimization-microservice</a>. The policy mutates the composition through the <a href="https://github.com/krateoplatformops/finops-webhook-template" target="_blank" rel="noopener noreferrer">finops-webhook-template</a> to add the optimization to the field <code>spec.optimization</code>, which is then displayed in the frontend.</p>
<p>The policy is triggered by a <code>CronJob</code> running periodically (every day by default) that labels the Composition resource with a label <code>optimization</code> that has as the value the timestamp with the last optimization request.</p>
<p>The modules involved are:</p>
<ul>
<li><a href="https://github.com/krateoplatformops/opa-chart" target="_blank" rel="noopener noreferrer">opa</a></li>
<li><a href="https://github.com/krateoplatformops/finops-moving-window-policy-chart" target="_blank" rel="noopener noreferrer">policies</a></li>
<li><a href="https://github.com/krateoplatformops/finops-moving-window-microservice" target="_blank" rel="noopener noreferrer">finops-moving-window-microservice</a></li>
<li><a href="https://github.com/krateoplatformops/finops-moving-window-microservice-chart" target="_blank" rel="noopener noreferrer">finops-moving-window-microservice-chart</a></li>
<li><a href="https://github.com/krateoplatformops/finops-webhook-template-chart" target="_blank" rel="noopener noreferrer">finops-webhook-template-chart</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-of-functionality">Summary of Functionality<a href="#summary-of-functionality" class="hash-link" aria-label="Direct link to Summary of Functionality" title="Direct link to Summary of Functionality">​</a></h2>
<p>The complete flow of the architecture starts with the creation of a generic composition definition that includes FinOps tags and custom resources. When a new composition definition is created, it is immediately parsed by the <a href="https://github.com/krateoplatformops/finops-composition-definition-parser" target="_blank" rel="noopener noreferrer">finops-composition-definition-parser</a> looking for resource annotations that will be used to connect the custom resources created with pricing information stored in the database. If pricing information is available, then it is displayed inside the frontend.</p>
<p>Then, when actually creating a composition, a mutating webhook gets called to apply a set of OPA policies which will perform several evaluations to decide how to best deploy the requested resources. These policies are split between &quot;day 1&quot; and &quot;day 2&quot;. Day 1 policies are applied when the mutating webhook is called for a <em>CREATE</em>. Day 2 policies are applied when the mutating webhook is called for an <em>UPDATE</em>. These types of policies represent any kind of optimization or algorithm that needs to be applied to the resources. The <em>UPDATE</em> events are triggered by actual resources updates or through a periodic cronjob, part of the composition definition. The policies can include any type of call or data, including custom performance targets or particular optimization objectives/functions.</p>
<p>An example &quot;day 1&quot; policy is the selection of the best time and location to minimize carbon intensity for a Virtual Machine (VM). This algorithm relies on a scheduler and forecaster. The forecaster runs periodically (triggered by the scheduler or through a periodic job) and predicts a window of data for each region of interest. The chosen model, TTMs, is extremely efficient and its inference can be executed hundreds of times per second on a single GPU. The forecasted data is then stored in the database (i.e., CrateDB in Krateo). The scheduler reads the data and, based on the forecasting, decides when and where to deploy the VM to minimize carbon intensity. Once decided, the mutating webhook finishes and the resource is mutated with the time and region. Then, the composition dynamic controller will create the resource at the right time in the selected region. The resource will be actually created by a dedicated service provider operator (e.g., Azure, AWS or GCP).</p>
<p>An Example &quot;day 2&quot; policy is implemented in <a href="https://github.com/krateoplatformops/finops-moving-window-policy" target="_blank" rel="noopener noreferrer">finops-moving-window-policy</a> with the moving window algorithm, which searches in the usage patterns of deployed virtual machines to find wasted resources.</p>
<p>The creation of the composition will also include the resources for the <a href="https://github.com/krateoplatformops/finops-operator-exporter" target="_blank" rel="noopener noreferrer">finops-operator-exporter</a>, which will allow the collection of metrics for the resources created. This will allow the forecaster to work on the actual data to create more &quot;ad-hoc&quot; predictions for each resource. Also, this creates a feedback optimization system, that should ideally stabilize on the ideal amount of resources to reach the target objective.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="krateo-composable-portal---finops">Krateo Composable Portal - FinOps<a href="#krateo-composable-portal---finops" class="hash-link" aria-label="Direct link to Krateo Composable Portal - FinOps" title="Direct link to Krateo Composable Portal - FinOps">​</a></h2>
<p>The data presentation for the FinOps components in the compositions is realized through the <a href="https://github.com/krateoplatformops/composition-portal-starter-finops" target="_blank" rel="noopener noreferrer">composition-portal-starter-finops</a>, which extends the example composition card and pages.</p>
<p>Additionally, there is also a FinOps dashboard available for the Composable Portal: <a href="https://github.com/krateoplatformops/finops-dashboard" target="_blank" rel="noopener noreferrer">finops-dashboard</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/key-concepts/kcp/resource-tree-handler"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">resource-tree-handler</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/key-concepts/kcf/finops-components/finops-operator-exporter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">finops-operator-exporter</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#complete-architecture" class="table-of-contents__link toc-highlight">Complete Architecture</a><ul><li><a href="#data-collection" class="table-of-contents__link toc-highlight">Data Collection</a></li><li><a href="#data-presentation" class="table-of-contents__link toc-highlight">Data Presentation</a></li><li><a href="#optimization" class="table-of-contents__link toc-highlight">Optimization</a></li></ul></li><li><a href="#summary-of-functionality" class="table-of-contents__link toc-highlight">Summary of Functionality</a></li><li><a href="#krateo-composable-portal---finops" class="table-of-contents__link toc-highlight">Krateo Composable Portal - FinOps</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Krateo</div></div></div></footer></div>
</body>
</html>